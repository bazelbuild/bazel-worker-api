matrix:
  platform: ["ubuntu2204", "macos", "macos_arm64", "windows"]
  bazel: [7.x, 8.x, rolling]
tasks:
  run_tests:
    name: build targets
    platform: ${{ platform }}
    bazel: ${{ bazel }}
    build_flags:
      - '--incompatible_enable_proto_toolchain_resolution'
      - '--@com_google_protobuf//bazel/toolchains:prefer_prebuilt_protoc=true'
    build_targets:
    - '@bazel_worker_api//...'
